{% extends "base.html" %}

{% block title %}Audio Player - Manatee{% endblock %}
{% block banner_title %}üéß Audio Player{% endblock %}

{% block content %}
    <div class="main-buttons">
        <a href="/upload" class="main-button">Upload More Audio</a>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul style="list-style: none; padding: 0; margin-top: 40px;">
          {% for category, message in messages %}
            <li style="margin-bottom: 10px; color: {{ 'green' if category == 'info' else 'red' }};">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    {% if audio_files %}
        {% for file in audio_files %}
        <div class="audio-player" style="background-color: white; margin-top: 30px; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <h3 style="margin-bottom: 10px;">üéµ {{ file }}</h3>
            
            <audio controls>
                {% if file.endswith('.mp3') %}
                <source src="{{ url_for('serve_file', filename=file) }}" type="audio/mpeg">
                {% elif file.endswith('.wav') %}
                <source src="{{ url_for('serve_file', filename=file) }}" type="audio/wav">
                {% endif %}
                Your browser does not support the audio element.
            </audio>

            <form action="{{ url_for('delete_audio', filename=file) }}" method="POST" style="margin-top: 15px;">
                <input type="submit" value="Delete" style="background-color: #e74c3c; color: white; padding: 10px 20px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer;">
            </form>
        </div>
        {% endfor %}
    {% else %}
        <div style="margin-top: 60px;">
            <p>No audio files found. Upload something cool to get started!</p>
            <a href="/upload" class="main-button" style="margin-top: 20px;">Upload Audio</a>
        </div>
    {% endif %}

    <a href="/" class="back-link" style="display: inline-block; margin-top: 50px;">‚Üê Back to Home</a>
{% endblock %}
